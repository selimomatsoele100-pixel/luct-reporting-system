{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nconsole.log('ðŸ”— API Base URL:', API_BASE_URL);\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000\n});\n\n// Request interceptor\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor with enhanced error handling\napi.interceptors.response.use(response => {\n  return response;\n}, error => {\n  var _error$config, _error$config2, _error$response, _error$response2, _error$response3, _error$response3$data, _error$response4, _error$response4$data;\n  console.error('API Error:', {\n    url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n    method: (_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.method,\n    status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n    data: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data,\n    message: error.message\n  });\n\n  // Enhanced error handling\n  if ((_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && _error$response3$data.error) {\n    error.userMessage = error.response.data.error;\n  } else if ((_error$response4 = error.response) !== null && _error$response4 !== void 0 && (_error$response4$data = _error$response4.data) !== null && _error$response4$data !== void 0 && _error$response4$data.message) {\n    error.userMessage = error.response.data.message;\n  } else if (error.code === 'ECONNREFUSED') {\n    error.userMessage = 'Cannot connect to server. Please check if backend is running.';\n  } else {\n    error.userMessage = 'An unexpected error occurred. Please try again.';\n  }\n  return Promise.reject(error);\n});\nexport const authAPI = {\n  login: credentials => api.post('/auth/login', credentials),\n  register: userData => api.post('/auth/register', userData),\n  getInitData: () => api.get('/auth/init-data')\n};\nexport const reportsAPI = {\n  create: reportData => api.post('/reports', reportData),\n  getMyReports: () => api.get('/reports/my-reports'),\n  getUnsignedReports: () => api.get('/reports/unsigned'),\n  signReport: reportId => api.put(`/reports/${reportId}/sign`),\n  getAll: () => api.get('/reports')\n};\nexport const usersAPI = {\n  getLecturers: () => api.get('/users/lecturers'),\n  getStudents: () => api.get('/users/students'),\n  getClasses: () => api.get('/users/classes'),\n  getCourses: () => api.get('/users/courses'),\n  assignClass: assignmentData => api.post('/users/assign-class', assignmentData)\n};\nexport const complaintsAPI = {\n  create: complaintData => api.post('/complaints', complaintData),\n  getMyComplaints: () => api.get('/complaints/my-complaints'),\n  getComplaintsForMe: () => api.get('/complaints/for-me'),\n  respond: (complaintId, response) => api.put(`/complaints/${complaintId}/respond`, {\n    response\n  }),\n  getAll: () => api.get('/complaints')\n};\n\n// Connection testing\nexport const connectionAPI = {\n  health: () => api.get('/health')\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","console","log","api","create","baseURL","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","response","error","_error$config","_error$config2","_error$response","_error$response2","_error$response3","_error$response3$data","_error$response4","_error$response4$data","url","method","status","data","message","userMessage","code","Promise","reject","authAPI","login","credentials","post","register","userData","getInitData","get","reportsAPI","reportData","getMyReports","getUnsignedReports","signReport","reportId","put","getAll","usersAPI","getLecturers","getStudents","getClasses","getCourses","assignClass","assignmentData","complaintsAPI","complaintData","getMyComplaints","getComplaintsForMe","respond","complaintId","connectionAPI","health"],"sources":["C:/Users/user/luct-reporting-system/frontend/src/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconsole.log('ðŸ”— API Base URL:', API_BASE_URL);\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 10000,\r\n});\r\n\r\n// Request interceptor\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Response interceptor with enhanced error handling\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    console.error('API Error:', {\r\n      url: error.config?.url,\r\n      method: error.config?.method,\r\n      status: error.response?.status,\r\n      data: error.response?.data,\r\n      message: error.message\r\n    });\r\n\r\n    // Enhanced error handling\r\n    if (error.response?.data?.error) {\r\n      error.userMessage = error.response.data.error;\r\n    } else if (error.response?.data?.message) {\r\n      error.userMessage = error.response.data.message;\r\n    } else if (error.code === 'ECONNREFUSED') {\r\n      error.userMessage = 'Cannot connect to server. Please check if backend is running.';\r\n    } else {\r\n      error.userMessage = 'An unexpected error occurred. Please try again.';\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const authAPI = {\r\n  login: (credentials) => api.post('/auth/login', credentials),\r\n  register: (userData) => api.post('/auth/register', userData),\r\n  getInitData: () => api.get('/auth/init-data'),\r\n};\r\n\r\nexport const reportsAPI = {\r\n  create: (reportData) => api.post('/reports', reportData),\r\n  getMyReports: () => api.get('/reports/my-reports'),\r\n  getUnsignedReports: () => api.get('/reports/unsigned'),\r\n  signReport: (reportId) => api.put(`/reports/${reportId}/sign`),\r\n  getAll: () => api.get('/reports'),\r\n};\r\n\r\nexport const usersAPI = {\r\n  getLecturers: () => api.get('/users/lecturers'),\r\n  getStudents: () => api.get('/users/students'),\r\n  getClasses: () => api.get('/users/classes'),\r\n  getCourses: () => api.get('/users/courses'),\r\n  assignClass: (assignmentData) => api.post('/users/assign-class', assignmentData),\r\n};\r\n\r\nexport const complaintsAPI = {\r\n  create: (complaintData) => api.post('/complaints', complaintData),\r\n  getMyComplaints: () => api.get('/complaints/my-complaints'),\r\n  getComplaintsForMe: () => api.get('/complaints/for-me'),\r\n  respond: (complaintId, response) => api.put(`/complaints/${complaintId}/respond`, { response }),\r\n  getAll: () => api.get('/complaints'),\r\n};\r\n\r\n// Connection testing\r\nexport const connectionAPI = {\r\n  health: () => api.get('/health'),\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}